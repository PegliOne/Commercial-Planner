<h2>Select Products</h2>

<%= link_to "View Your Order", order_path(@order.id) %>

<h3>Select Food Items</h3>

<p>
    <% @foods.map do |product| %>
      <%= form_tag update_product_order_path do %>
        <%= product.name %>
        <%= text_field_tag :product_id, nil, :value => product.id, :readonly => true %>
        <strong><%= label_tag :quantity %></strong>
        <% if @product_orders.where(:order_id => @order.id, :product_id => product.id).first.present? %>
          <%= @product_orders.where(:order_id => @order.id, :product_id => product.id).first.quantity%>
        <% else %>
          0
        <% end %>
        <strong><%= label_tag "New Quantity" %></strong>
        <%= number_field_tag :quantity, nil, :min => 0, :max => 20 %>
        <%= submit_tag %>
      <% end %>
    <% end %>
</p>

<h3>Select Drink Items</h3>

<p>
    <% @drinks.map do |product, index| %>
      <%= form_tag update_product_order_path do %>
        <%= product.name %>
        <%= text_field_tag :product_id, nil, :value => product.id, :readonly => true %>
        <strong><%= label_tag :quantity %></strong>
        <% if @product_orders.where(:order_id => @order.id, :product_id => product.id).first.present? %>
          <%= @product_orders.where(:order_id => @order.id, :product_id => product.id).first.quantity%>
        <% else %>
          0
        <% end %>
        <strong><%= label_tag "New Quantity" %></strong>
        <%= number_field_tag :quantity, nil, :min => 0, :max => 20 %>
        <%= submit_tag %>
      <% end %>
    <% end %>
</p>

<h3>Select Clothing Items</h3>

<p>
    <% @clothing.map do |product, index| %>
      <%= form_tag update_product_order_path do %>
        <%= product.name %>
        <%= text_field_tag :product_id, nil, :value => product.id, :readonly => true %>
        <strong><%= label_tag :quantity %></strong>
        <% if @product_orders.where(:order_id => @order.id, :product_id => product.id).first.present? %>
          <%= @product_orders.where(:order_id => @order.id, :product_id => product.id).first.quantity%>
        <% else %>
          0
        <% end %>
        <strong><%= label_tag "New Quantity" %></strong>
        <%= number_field_tag :quantity, nil, :min => 0, :max => 20 %>
        <%= submit_tag %>
      <% end %>
    <% end %>
</p>

<h3>Select Health and Hygiene Items</h3>

<p>
    <% @hygiene_products.map do |product, index| %>
      <%= form_tag update_product_order_path do %>
        <%= product.name %>
        <%= text_field_tag :product_id, nil, :value => product.id, :readonly => true %>
        <strong><%= label_tag :quantity %></strong>
        <% if @product_orders.where(:order_id => @order.id, :product_id => product.id).first.present? %>
          <%= @product_orders.where(:order_id => @order.id, :product_id => product.id).first.quantity%>
        <% else %>
          0
        <% end %>
        <strong><%= label_tag "New Quantity" %></strong>
        <%= number_field_tag :quantity, nil, :min => 0, :max => 20 %>
        <%= submit_tag %>
      <% end %>
    <% end %>
</p>

<h3>Select Transport Tickets</h3>

<p>
    <% @tickets.map do |product, index| %>
      <%= form_tag update_product_order_path do %>
        <%= product.name %>
        <%= text_field_tag :product_id, nil, :value => product.id, :readonly => true %>
        <strong><%= label_tag :quantity %></strong>
        <% if @product_orders.where(:order_id => @order.id, :product_id => product.id).first.present? %>
          <%= @product_orders.where(:order_id => @order.id, :product_id => product.id).first.quantity%>
        <% else %>
          0
        <% end %>
        <strong><%= label_tag "New Quantity" %></strong>
        <%= number_field_tag :quantity, nil, :min => 0, :max => 20 %>
        <%= submit_tag %>
      <% end %>
    <% end %>
</p>

<h3>Select Entertainment Products</h3>

<p>
    <% @entertainment.map do |product, index| %>
      <%= form_tag update_product_order_path do %>
        <%= product.name %>
        <%= text_field_tag :product_id, nil, :value => product.id, :readonly => true %>
        <strong><%= label_tag :quantity %></strong>
        <% if @product_orders.where(:order_id => @order.id, :product_id => product.id).first.present? %>
          <%= @product_orders.where(:order_id => @order.id, :product_id => product.id).first.quantity%>
        <% else %>
          0
        <% end %>
        <strong><%= label_tag "New Quantity" %></strong>
        <%= number_field_tag :quantity, nil, :min => 0, :max => 20 %>
        <%= submit_tag %>
      <% end %>
    <% end %>
</p>

<%= link_to "View Your Order", order_path(@order.id) %>
